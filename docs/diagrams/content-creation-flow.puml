@startuml DaySave_Content_Creation_Flow
!theme plain
skinparam backgroundColor #FFFFFF
skinparam defaultFontName Arial
skinparam defaultFontSize 10

title DaySave - User Content Creation Flow

start

:Open DaySave;
if (Authenticated?) then (yes)
  :Proceed to Dashboard;
else (no)
  :Go to Login;
  :Enter credentials;
  :Complete 2FA if required;
  :Authenticated session;
endif

:Navigate to Content > Add New;
if (Choose input type) then (URL)
  repeat
    :Enter URL;
    :Validate URL format;
    if (URL valid?) then (yes)
    else (no)
      :Show validation error;
    endif
  repeat while (URL valid?) is (no)
  :Fetch metadata (OG/Twitter tags);
elseif (File)
  repeat
    :Choose file from device;
    :Validate type & size;
    if (File valid?) then (yes)
    else (no)
      :Show validation error;
    endif
  repeat while (File valid?) is (no)
  :Upload to storage;
endif

:Fill optional fields (title, notes, tags);
:Submit form;

:Create Content record;
fork
  :Queue ProcessingJob for AI analysis;
  :Return to user immediately;
fork again
  :Redirect to Content Detail page;
  :Show success notification;
end fork

stop

@enduml

